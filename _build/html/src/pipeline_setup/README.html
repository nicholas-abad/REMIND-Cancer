<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>REMIND-Cancer: Folder Structure &amp; Results JSON Setup &#8212; REMIND-Cancer 1.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=5ecbeea2" />
    <link rel="stylesheet" type="text/css" href="../../_static/basic.css?v=b08954a9" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css?v=27fed22d" />
    <script src="../../_static/documentation_options.js?v=f2a433a1"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="remind-cancer-folder-structure-results-json-setup">
<h1>REMIND-Cancer: Folder Structure &amp; Results JSON Setup<a class="headerlink" href="#remind-cancer-folder-structure-results-json-setup" title="Link to this heading">Â¶</a></h1>
<p>This script automates the setup of the <strong>REMIND-Cancer</strong> projectâ€™s folder structure and the creation of a JSON file to track results. It takes a <strong>configuration file</strong> as input and performs the following:</p>
<ol class="arabic simple">
<li><p><strong>Creates a structured folder system</strong> for patient data.</p></li>
<li><p><strong>Copies WGS (Whole Genome Sequencing) VCF files</strong> into the structured folder.</p></li>
<li><p><strong>Generates a results JSON file</strong> to track processed data.</p></li>
</ol>
<hr class="docutils" />
<section id="optional-run-validation-scripts-before-this">
<h2><strong>Optional: Run Validation Scripts Before This</strong><a class="headerlink" href="#optional-run-validation-scripts-before-this" title="Link to this heading">Â¶</a></h2>
<p>Before running the main pipeline, ensure everything is set up correctly by validating the required files. Navigate to the <code class="docutils literal notranslate"><span class="pre">utils</span></code> subfolder and run the following scripts:</p>
<section id="validate-configuration-file">
<h3><strong>Validate Configuration File</strong><a class="headerlink" href="#validate-configuration-file" title="Link to this heading">Â¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>src/utils/validate_configuration_file.py<span class="w"> </span>-c<span class="w"> </span>path/to/configuration_file.json
</pre></div>
</div>
</section>
<section id="validate-metadata-file">
<h3><strong>Validate Metadata File</strong><a class="headerlink" href="#validate-metadata-file" title="Link to this heading">Â¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>src/utils/validate_metadata_file.py<span class="w"> </span>-m<span class="w"> </span>path/to/metadata.csv
</pre></div>
</div>
</section>
<section id="validate-rna-seq-dataframe">
<h3><strong>Validate RNA-Seq Dataframe</strong><a class="headerlink" href="#validate-rna-seq-dataframe" title="Link to this heading">Â¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>src/utils/validate_rnaseq_dataframe.py<span class="w"> </span>-r<span class="w"> </span>path/to/rnaseq.csv
</pre></div>
</div>
<p>These scripts will check for missing files, incorrect formats, and inconsistencies to prevent errors in the pipeline.</p>
</section>
</section>
<hr class="docutils" />
<section id="usage">
<h2><strong>Usage</strong><a class="headerlink" href="#usage" title="Link to this heading">Â¶</a></h2>
<p>Run the script in order to set up the pipeline structure using:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>src/pipeline_setup/create_initial_structure.py<span class="w"> </span>-c<span class="w"> </span>path/to/configuration_file.json
</pre></div>
</div>
</section>
<hr class="docutils" />
<section id="what-this-script-does">
<h2><strong>What This Script Does</strong><a class="headerlink" href="#what-this-script-does" title="Link to this heading">Â¶</a></h2>
<section id="load-configuration-file">
<h3><strong>1. Load Configuration File</strong><a class="headerlink" href="#load-configuration-file" title="Link to this heading">Â¶</a></h3>
<p>The script begins by reading a JSON configuration file, which contains:</p>
<ul class="simple">
<li><p>The dataset name.</p></li>
<li><p>The path to the <strong>metadata CSV file</strong>.</p></li>
<li><p>The output location for patient folders.</p></li>
<li><p>The output path for the results JSON file.</p></li>
</ul>
</section>
<section id="create-folder-structure-for-patients">
<h3><strong>2. Create Folder Structure for Patients</strong><a class="headerlink" href="#create-folder-structure-for-patients" title="Link to this heading">Â¶</a></h3>
<p>This step reads the <strong>metadata CSV file</strong> and generates a directory structure:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>output_path_to_patient_folders/
 â”œâ”€â”€ patient_1_tumor/
 â”‚   â”œâ”€â”€ sample1_original.vcf
 â”œâ”€â”€ patient_2_tumor/
 â”‚   â”œâ”€â”€ sample2_original.vcf
</pre></div>
</div>
<ul class="simple">
<li><p>Each <strong>patientâ€™s folder</strong> is named as <code class="docutils literal notranslate"><span class="pre">pid_tumor_origin</span></code>.</p></li>
<li><p>Each <strong>VCF file</strong> is copied and renamed with <code class="docutils literal notranslate"><span class="pre">_original.vcf</span></code>.</p></li>
<li><p>If a <strong>VCF file is missing</strong>, a warning is logged.</p></li>
</ul>
</section>
<section id="create-a-results-tracking-json">
<h3><strong>3. Create a Results Tracking JSON</strong><a class="headerlink" href="#create-a-results-tracking-json" title="Link to this heading">Â¶</a></h3>
<p>A JSON file is generated to track the presence of sequencing and expression data.</p>
<section id="example-output-results-json">
<h4><strong>Example Output (<code class="docutils literal notranslate"><span class="pre">results.json</span></code>)</strong><a class="headerlink" href="#example-output-results-json" title="Link to this heading">Â¶</a></h4>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;results&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;original&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;primary_tumor_wgs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;path/to/patient_1/sample1_original.vcf&quot;</span><span class="p">],</span>
<span class="w">            </span><span class="nt">&quot;primary_tumor_wgs_and_rnaseq&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">            </span><span class="nt">&quot;metastasic_tumor_wgs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">            </span><span class="nt">&quot;metastasic_tumor_wgs_and_rnaseq&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The script:</p>
<ul class="simple">
<li><p>Extracts <code class="docutils literal notranslate"><span class="pre">pid</span></code> from each patient folder.</p></li>
<li><p>Checks <code class="docutils literal notranslate"><span class="pre">tumor_origin</span></code> and whether RNA-seq data exists.</p></li>
<li><p>Classifies files accordingly.</p></li>
</ul>
</section>
</section>
</section>
<section id="detailed-breakdown-of-functions">
<h2><strong>Detailed Breakdown of Functions</strong><a class="headerlink" href="#detailed-breakdown-of-functions" title="Link to this heading">Â¶</a></h2>
<section id="create-folder-structure-metadata-path-output-folder">
<h3><strong><code class="docutils literal notranslate"><span class="pre">create_folder_structure(metadata_path,</span> <span class="pre">output_folder)</span></code></strong><a class="headerlink" href="#create-folder-structure-metadata-path-output-folder" title="Link to this heading">Â¶</a></h3>
<ul class="simple">
<li><p>Reads the metadata CSV.</p></li>
<li><p>Iterates through each <strong>patient ID (<code class="docutils literal notranslate"><span class="pre">pid</span></code>)</strong>.</p></li>
<li><p>Creates a <strong>patient subfolder</strong> if it doesnâ€™t exist.</p></li>
<li><p>Copies the <strong>VCF file</strong> to the correct location.</p></li>
<li><p>Logs <strong>missing files</strong>.</p></li>
</ul>
</section>
<section id="create-results-json-metadata-path-patient-folders-path-results-json-path">
<h3><strong><code class="docutils literal notranslate"><span class="pre">create_results_json(metadata_path,</span> <span class="pre">patient_folders_path,</span> <span class="pre">results_json_path)</span></code></strong><a class="headerlink" href="#create-results-json-metadata-path-patient-folders-path-results-json-path" title="Link to this heading">Â¶</a></h3>
<ul class="simple">
<li><p>Reads metadata to extract tumor and expression data.</p></li>
<li><p>Scans patient folders for VCF files.</p></li>
<li><p>Categorizes each file into one of four groups:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">primary_tumor_wgs</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">primary_tumor_wgs_and_rnaseq</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">metastasic_tumor_wgs</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">metastasic_tumor_wgs_and_rnaseq</span></code></p></li>
</ul>
</li>
<li><p>Saves results as a JSON file.</p></li>
</ul>
</section>
<section id="main-config-path">
<h3><strong><code class="docutils literal notranslate"><span class="pre">main(config_path)</span></code></strong><a class="headerlink" href="#main-config-path" title="Link to this heading">Â¶</a></h3>
<ul class="simple">
<li><p>Parses the <strong>configuration file</strong>.</p></li>
<li><p>Calls <code class="docutils literal notranslate"><span class="pre">create_folder_structure()</span></code>.</p></li>
<li><p>Calls <code class="docutils literal notranslate"><span class="pre">create_results_json()</span></code>.</p></li>
</ul>
</section>
</section>
<hr class="docutils" />
<section id="expected-console-output">
<h2><strong>Expected Console Output</strong><a class="headerlink" href="#expected-console-output" title="Link to this heading">Â¶</a></h2>
<p>When you run the script, youâ€™ll see output similar to:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1">#### (1/2) Creating Folder Structure ####</span>
Setting<span class="w"> </span>up<span class="w"> </span>folder<span class="w"> </span>structure:<span class="w"> </span><span class="m">100</span>%<span class="p">|</span>â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ<span class="p">|</span><span class="w"> </span><span class="m">50</span>/50<span class="w"> </span><span class="o">[</span><span class="m">00</span>:03&lt;<span class="m">00</span>:00,<span class="w"> </span><span class="m">15</span>.5it/s<span class="o">]</span>
âœ…<span class="w"> </span>Folder<span class="w"> </span>structure<span class="w"> </span>created<span class="w"> </span>at:<span class="w"> </span>/path/to/patient_folders
â—<span class="w"> </span>Number<span class="w"> </span>of<span class="w"> </span>VCF<span class="w"> </span>files<span class="w"> </span>not<span class="w"> </span>copied:<span class="w"> </span><span class="m">3</span>

<span class="c1">#### (2/2) Creating Results JSON File ####</span>
Generating<span class="w"> </span>JSON<span class="w"> </span>file:<span class="w"> </span><span class="m">100</span>%<span class="p">|</span>â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ<span class="p">|</span><span class="w"> </span><span class="m">50</span>/50<span class="w"> </span><span class="o">[</span><span class="m">00</span>:02&lt;<span class="m">00</span>:00,<span class="w"> </span><span class="m">20</span>.2it/s<span class="o">]</span>
âœ…<span class="w"> </span>Results<span class="w"> </span>JSON<span class="w"> </span>saved<span class="w"> </span>at:<span class="w"> </span>/path/to/results.json
</pre></div>
</div>
</section>
<hr class="docutils" />
<section id="prerequisites">
<h2><strong>Prerequisites</strong><a class="headerlink" href="#prerequisites" title="Link to this heading">Â¶</a></h2>
<ul>
<li><p><strong>Python 3.x</strong> installed.</p></li>
<li><p>Install dependencies using:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>requirements.txt
</pre></div>
</div>
</li>
<li><p>Ensure all file paths in <code class="docutils literal notranslate"><span class="pre">configuration_file.json</span></code> are correctly set.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="troubleshooting">
<h2><strong>Troubleshooting</strong><a class="headerlink" href="#troubleshooting" title="Link to this heading">Â¶</a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Issue</p></th>
<th class="head"><p>Solution</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">FileNotFoundError:</span> <span class="pre">Metadata</span> <span class="pre">file</span> <span class="pre">not</span> <span class="pre">found</span></code></p></td>
<td><p>Check that the metadata CSV path is correct in the config file.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">VCF</span> <span class="pre">file</span> <span class="pre">does</span> <span class="pre">not</span> <span class="pre">exist</span></code></p></td>
<td><p>Ensure the <code class="docutils literal notranslate"><span class="pre">path_to_wgs_file</span></code> column in the metadata file contains valid file paths.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Results</span> <span class="pre">JSON</span> <span class="pre">is</span> <span class="pre">empty</span></code></p></td>
<td><p>Check that the metadata contains valid tumor and RNA-seq data references.</p></td>
</tr>
</tbody>
</table>
<p>This script automates the setup process, ensuring that data is structured properly before pipeline execution. ğŸš€</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">REMIND-Cancer</a></h1>









<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2025, Nicholas Allen Baclig Abad.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.2.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="../../_sources/src/pipeline_setup/README.md.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>